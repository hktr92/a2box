#!/bin/bash

####
## a2box - utility to creating apache2 virtual hosts
##
## this utility creates virtual hosts (known as vhost) for apache2 service.
## currently it works only with linux, for Debian family
##
## author: Petru Szemereczki
## version: 2.0
####

declare -r ROOT_DIRECTORY=$(dirname $(dirname $0));

## lazy to source manually libraries :'(
## @TODO do some checkings if module config exists
for library in $(ls "${ROOT_DIRECTORY}/lib"); do
  if [[ -f "${library}" ]]; then
    source "${ROOT_DIRECTORY}/etc/${library}.cnf"
    source "${ROOT_DIRECTORY}/lib/${library}.sh"
  fi
done

function ::main()
{
  local module=$1
  local command=$2

  if [[ -z "${module}" ]]; then
    ::info
    return $?
  fi

  a2box::${module}::main ${command}
  return $?
}

::main $@
exit $?
